<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src='asyncReq.js'> </script>
  <link rel='stylesheet' href='style.css'>
  <script src='script.js'>
  </script>
  <script>
var fileUploaded = function()
{
   var file = $('#theFile').get(0);
   var fileObj = $('#theFile').get(0).files[0]
   var filename = fileObj.name;
   var ext = filename.split(".");
   ext = ext[ext.length-1];
   console.log(ext);

   var fd = new FormData();
   var fileInput = "s3Upload_" + new Date().getTime().toString() + "." + ext;
   fd.append('fileInput', fileInput);
   fd.append('input', file.files[0]);
   fd.append('date', (new Date()).toString());

    //fd.append('data', data);
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function(e) {  
      if (xhr.readyState != 4) { return; }
        // callback logic
    //   document.getElementById("preview").src = "https://bucket470570.s3-us-west-2.amazonaws.com/" + fileInput;
    };
    xhr.open("POST", "/uploadFile", true);
    xhr.send(fd);
}
var doLogout = function()
{
  var x = confirm("Logout now?")
  if(x){
    loadFile("./logout", function(d){window.location.reload()})
  }
}
  </script>
</head>
<body onload='start()'>
  <div id='feedList'>
  </div>
  <div id='itemListWrapper'>
    <button onclick='editFeed()' style='display:none'> Edit Feed </button>
    <button onclick='deleteFeed()' style='display:none'> Delete Feed </button>
    <div id='itemList'>
    </div>
  </div>
  <div id='itemDetails'>
  </div>
  <input type="file" style='position:fixed;bottom:0' onchange='fileUploaded()'
       id="theFile" name="theFile"
       accept="image/png, image/jpeg">

  <button onclick='doLogout()' style='position:fixed;top:5px;right:5px'> Logout </button>
</body>
</html>
